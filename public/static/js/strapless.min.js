var Strapless=function(){function e(){var e=document.createElement("canvas"),t,o=document.getElementById("favicon"),n=document.getElementById("get_color1"),l=document.getElementById("get_color2"),s=document.getElementById("get_color3"),c=document.getElementById("get_color4");if(e.getContext){e.height=e.width=16,t=e.getContext("2d");var a=window.getComputedStyle(n).color,d=window.getComputedStyle(l).color,r=window.getComputedStyle(s).color,u=window.getComputedStyle(c).color;t.fillStyle=a,t.fillRect(1,1,7,7),t.fillStyle=d,t.fillRect(9,9,15,15),t.fillStyle=r,t.fillRect(9,1,15,7),t.fillStyle=u,t.fillRect(1,9,7,15),o.href=e.toDataURL("image/png")}}function t(e){return new Promise(function(t,o){var n=new XMLHttpRequest;n.open("GET","/less/"+e),n.onload=function(){if(this.status>=200&&this.status<300){var l={baseColor:e,styles:n.response};t(l)}else o({status:this.status,statusText:n.statusText})},n.onerror=function(){o({status:this.status,statusText:n.statusText})},n.send()})}function o(e){for(var t=0;t<document.styleSheets.length;t++){var o=document.styleSheets[t];if(o.title===e)return o}}function n(){for(var e=0;e<document.styleSheets.length;e++)document.head.removeChild(document.styleSheets[e].ownerNode)}function l(e,t){e.getElementsByTagName("circle")[0].setAttribute("stroke","#"+t)}function s(){var e=document.getElementById("seed_color").value,t=/^(?:[0-9a-f]{3}){1,2}$/i.test(e);t?location.href="/css/"+e:window.alert("Invalid hex color value entered.")}function c(){var o=document.getElementById("seed_color").value,s=document.getElementById("style_block"),c=/^(?:[0-9a-f]{3}){1,2}$/i.test(o);if(c){var a=document.getElementById("loading_overlay");l(a,o),a.style.display="block",t(o).then(function(t){n();var l=t.styles,s=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=l:c.appendChild(document.createTextNode(l)),history.pushState({baseColor:t.baseColor},"","/"+o),s.appendChild(c),a.style.display="none",e()}).catch(function(e){console.error(e)})}else window.alert("Invalid hex color value entered.")}return{updateScheme:function(){c()},downloadCSS:function(){s()},generateFavicon:function(){e()}}}();