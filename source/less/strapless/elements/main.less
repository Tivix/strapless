main {
  &:extend(section all);
  .margin-bottom();
  min-height: 100vh;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column;
  flex-direction: column;
  -webkit-align-items: left;
  align-items: left;
  -webkit-justify-content: center;
  justify-content: center;

  * {
    max-width: none;

    &:first-child {
      margin-top: 0;
    }
  }

  > * {
    max-width: @page-width;
    //margin-left: auto;
  }

  > p {
    max-width: @column-width;
  }

  .main-color(@base-color);

  .make-main-colors-for(@semantic-colors);
}

.make-main-colors-for(@colors) {
  // make main colors for a list of color variable names
  // mains will use variable names as class names

  @iterations: length(@colors);

  .make-main-color(1);

  .make-main-color(@index) when (@index <= @iterations) {

    @color-name: extract(@colors, @index);
    @this-color: @@color-name;

    &.@{color-name} {
      .main-color(@this-color);
    }

    .make-main-color(@index + 1);
  }
}

.main-color(@color) when (@color = @warning) {
  .set-lumafix(@color, @warning-base, .75);
  .contrast-text-against(@lumafix);
  .dots(@lumafix);

  .set-contrast-ratio(@lumafix; white;);
  & when (@contrast-ratio > 3) {
    h1, h2, h3 { .tint-text-against(@lumafix; 4.5;);}
  }
}

.main-color(@color) when (@color = @failure) {
  .set-lumafix(@color, @failure-base, .5);
  .contrast-text-against(@lumafix);
  .dots(@lumafix);

  .set-contrast-ratio(@lumafix; white;);
  & when (@contrast-ratio > 3) {
    h1, h2, h3 { .tint-text-against(@lumafix; 4.5;);}
  }
}

.main-color(@color) when (default()) {
  .set-c-color(@color);
  .dots(@c-color); // dots pattern background
  .contrast-text-against(@c-color);
}
